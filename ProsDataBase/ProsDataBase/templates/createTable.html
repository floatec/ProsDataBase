{% extends "base.html" %}


//TODO scrollable results: http://jqueryui.com/autocomplete/#maxheight ( CSS )



{% block content %}


        <div id="tabs">
<ul>
    <li><a href="#tabs-1">Schritt 1</a></li>
    <li><a href="#tabs-2">Schritt 2</a></li>
    <li><a href="#tabs-3">Schritt 3</a></li>
</ul>
<div id="tabs-1">
     <span>Name:</span><br />
        <input type="text"><br /><br />
        <span>Tabellen Administratoren</span><br />
        <table>
            <tr>
       <td><span>User</span></td>
        <td><span>Gruppen</span></td>
             </tr>

        <tr>
        <td><textarea name="user_eingabe" id="userAdmin" cols="40" rows="8"></textarea></td>
        <td><textarea name="group_eingabe" id="groupAdmin" cols="40" rows="8"></textarea></td>
        </tr>
        </table>

        <button id="nextButtonPage2">weiter</button>



</div>
<div id="tabs-2">

    <table id="columnTable">

        <tr><td></td><td>Bezeichnung</td><td>Datentyp</td></tr>
        <tr><td><button id="deleteButton1">-</button></td><td><input type="text" id="field1"></td><td><select class="selectDataType"></select></td><td class="enumSelected"></td></tr>
    </table>

    <button id="addColumn">+</button><br />
    <button id="nextButtonPage3">weiter</button>
</div>
<div id="tabs-3">
    <!--TODO: Berechtigungen hier-->
    <button>weiter</button>

</div>
</div>









{% endblock %}

{% block javascript %}
<script language="JavaScript" >


// FIRST TAB

        // initialize variable
        columnID = 1;

        // initialize tabs
         $( "#tabs" ).tabs({
                collapsible: false,
                disabled: [1,2]
         });



            // function to switch to second tab
         $("#nextButtonPage2").click(function(){
            $("#tabs").tabs( "option", "disabled", [ 2 ]);
            $("#tabs").tabs("option","active",1);

         });


     var availableTags = [
"Hans",
"Peter",
"Aaron",
"Beatrice",
"Christine",
"Dora",
"Elise",
"Figo",
"Gabor",
"Heinrich Hubel",
"Igor",
"Jamal",
"Kira",
"Lena",
"Manni",
"Nani",
"Olaf",
"Peter Lustig",
"Rita",
"Superman",
"Bud Spencer",
"Mario Balotelli"];



        // functions for auto-complete
        function split( val ) {
            return val.split( /,\s*/ );
        }
        function extractLast( term ) {
            return split( term ).pop();
        }




        //auto complete for users
        $("#userAdmin")

         .bind( "keydown", function( event ) {
            if ( event.keyCode === $.ui.keyCode.TAB &&
            $( this ).data( "ui-autocomplete" ).menu.active ) {
            event.preventDefault();
            }
            })
        .autocomplete({



        //TODO: Hier mit AJAX die USER ziehen
          source: function( request, response ) {

        response( $.ui.autocomplete.filter(
        availableTags, extractLast( request.term ) ) );
        },
        select: function(event,ui){
        var terms = split( this.value );

            terms.pop();

            terms.push( ui.item.value );

            terms.push( "" );
            this.value = terms.join( ", " );
            return false;

        }



        });

            //auto-complete for groups
 $("#groupAdmin")

         .bind( "keydown", function( event ) {
            if ( event.keyCode === $.ui.keyCode.TAB &&
            $( this ).data( "ui-autocomplete" ).menu.active ) {
            event.preventDefault();
            }
            })
        .autocomplete({



        //TODO: Hier mit AJAX die USER ziehen
          source: function( request, response ) {

        response( $.ui.autocomplete.filter(
        availableTags, extractLast( request.term ) ) );
        },
        select: function(event,ui){
        var terms = split( this.value );

            terms.pop();

            terms.push( ui.item.value );

            terms.push( "" );
            this.value = terms.join( ", " );
            return false;

        }



        });


// SECOND TAB


    // method to add a column
     $("#addColumn").click(function(){
         columnID++;
         $("#columnTable").append("<tr><td><button id='deleteButton"+columnID+"'>-</button></td><td><input type='text' id='field"+columnID+"'></td><td><select class='selectDataType'></select></td><td class='enumSelected'></td></tr>");


     });


    // switch to page 3
       // function to switch to second tab
         $("#nextButtonPage3").click(function(){
            $("#tabs").tabs("enable",2);
            $("#tabs").tabs("option","active",2);

         });


//TODO:MINUSBUTTON implementieren



</script>

{% endblock %}